<div class="notice-board">
  <h3>ðŸ“¢ Announcements</h3>
  <div class="notices-container">
    <div class="notices">
      {% if site.data.notices.recent_notices %}
        {% for notice in site.data.notices.recent_notices %}
          <div class="notice-item">
            <h4>{{ notice.title }}</h4>
            <small>{{ notice.date | date: "%b %d, %Y" }}</small>
            <div class="notice-content">{{ notice.content | markdownify }}</div>
          </div>
        {% endfor %}
      {% else %}
        <p class="no-notices">No current announcements.</p>
      {% endif %}
    </div>
  </div>
</div>

<style>
  .notice-board {
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 0;
    width: 300px;
    overflow: hidden;
    position: relative;
  }

  .notice-board h3 {
    background: #2c3e50;
    color: white;
    padding: 12px 15px;
    margin: 0;
    font-size: 1.1em;
  }

  .notices-container {
    height: 300px;
    overflow: hidden;
    position: relative;
  }

  .notices {
    position: absolute;
    width: 100%;
    padding: 15px;
    box-sizing: border-box;
    top: 0;
    transition: transform 0.5s ease;
  }

  .notice-item {
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
  }

  .notice-item:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
  }

  .notice-item h4 {
    margin: 0 0 5px 0;
    color: #2c3e50;
    font-size: 1em;
  }

  .notice-item small {
    color: #7f8c8d;
    font-size: 0.8em;
    display: block;
    margin-bottom: 8px;
  }

  .notice-content {
    color: #34495e;
    font-size: 0.9em;
    line-height: 1.4;
  }

  .no-notices {
    color: #95a5a6;
    text-align: center;
    padding: 20px;
    font-style: italic;
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const container = document.querySelector('.notices-container');
  const notices = document.querySelector('.notices');
  const noticeItems = document.querySelectorAll('.notice-item');
  
  if (noticeItems.length > 1) {
    // Calculate total height needed
    let totalHeight = 0;
    noticeItems.forEach(item => {
      totalHeight += item.offsetHeight;
    });
    
    // Add margin for the last item
    totalHeight += parseInt(window.getComputedStyle(noticeItems[0]).marginBottom) * (noticeItems.length - 1);
    
    const containerHeight = container.offsetHeight;
    const scrollableHeight = totalHeight - containerHeight;
    let scrollPosition = 0;
    let animationId;
    let isHovered = false;
    
    function autoScroll() {
      if (!isHovered) {
        if (scrollPosition < scrollableHeight) {
          scrollPosition += 0.5;
          notices.style.transform = `translateY(-${scrollPosition}px)`;
        } else {
          // When reaching bottom, reset to top after 2 seconds
          setTimeout(() => {
            scrollPosition = 0;
            notices.style.transform = `translateY(0)`;
          }, 2000);
        }
      }
      animationId = requestAnimationFrame(autoScroll);
    }
    
    // Start auto-scroll
    autoScroll();
    
    // Pause on hover
    container.addEventListener('mouseenter', () => {
      isHovered = true;
    });
    
    container.addEventListener('mouseleave', () => {
      isHovered = false;
    });
    
    // Clean up
    window.addEventListener('beforeunload', () => {
      cancelAnimationFrame(animationId);
    });
  }
});
</script>
